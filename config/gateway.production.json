{
  "server": {
    "host": "0.0.0.0",
    "port": 8080,
    "tls": {
      "enabled": true,
      "cert_file": "/etc/api-gateway/certs/server.crt",
      "key_file": "/etc/api-gateway/certs/server.key"
    },
    "max_connections": 10000,
    "connection_timeout": 30,
    "request_timeout": 30,
    "max_body_size": 10485760
  },
  "jwt": {
    "algorithm": "HS256",
    "secret": "${JWT_SECRET}",
    "issuer": "${JWT_ISSUER}",
    "audience": "${JWT_AUDIENCE}",
    "access_token_expiry": 900,
    "refresh_token_expiry": 86400
  },
  "rate_limits": {
    "global": {
      "requests": 100000,
      "window": 60
    },
    "per_ip": {
      "requests": 1000,
      "window": 60
    },
    "per_ip_connections": 50,
    "endpoints": {
      "/api/auth/login": {
        "requests": 5,
        "window": 300
      },
      "/api/auth/register": {
        "requests": 3,
        "window": 3600
      },
      "/api/payment": {
        "requests": 100,
        "window": 60
      }
    }
  },
  "logging": {
    "level": "info",
    "format": "json",
    "file": "/var/log/api-gateway/gateway.log",
    "max_file_size": 104857600,
    "max_files": 30,
    "async": true
  },
  "security": {
    "max_header_size": 8192,
    "allowed_methods": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"],
    "cors": {
      "enabled": true,
      "allowed_origins": ["${CORS_ALLOWED_ORIGINS}"],
      "allowed_headers": ["Authorization", "Content-Type", "X-Request-ID"],
      "allowed_methods": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"],
      "max_age": 3600,
      "allow_credentials": true
    },
    "headers": {
      "x_frame_options": "DENY",
      "x_content_type_options": "nosniff",
      "x_xss_protection": "1; mode=block",
      "strict_transport_security": "max-age=31536000; includeSubDomains",
      "content_security_policy": "default-src 'self'",
      "referrer_policy": "strict-origin-when-cross-origin"
    }
  },
  "backends": {
    "health_check_interval": 10,
    "health_check_timeout": 5,
    "circuit_breaker": {
      "failure_threshold": 5,
      "recovery_timeout": 60,
      "half_open_requests": 3
    },
    "retry": {
      "max_attempts": 3,
      "backoff_multiplier": 2,
      "initial_delay_ms": 100
    }
  }
}
